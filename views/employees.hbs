<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/style.css">
    <title>CRUD</title>
</head>
<body>
<div class="nav1"></div>
<nav>
    <h4>This is the employee pagee</h4>
    <ul>
        <li><a href="/">Logout</a></li>
    </ul>
</nav>
<br>
<div class="searchbtn">
<form action="/employees/search" method="get"class="d-flex mb-4">
    &nbsp; &nbsp;<input type="text" name="q" placeholder="Search..."  value="{{query}}"/>
    <button type="submit">Search</button>
    </form>
    </div>
    <div class="filterbtn">
        <form action="/employees">
        <button>Clear Search</button>
        </form>
    </div>
<div class="addEmp">
    <ul>
        <li><button><a href="/employeeRegister">Add Employee</a></button></li>
    </ul>
</div> 
<br>
<br>
<table class="table">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Department</th>
        <th>Actions</th>
    </tr>
    <h4>Employee Count: {{employees.length}}</h4>
{{#each employees}}
    <tr>
        <td>{{this.id}}</td>
        <td>{{this.name}}</td>
        <td>{{this.email}}</td>
        <td>{{this.phone}}</td>
        <td>{{this.department}}</td>
        <td>
            <a href="/edit/{{this.id}}">
                <button type="button">Update</button>
            </a>
            <form action="/delete/{{this.id}}" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
            </form>
        </td>
    </tr>
{{else}}
    <tr><td colspan="6">No employees found</td></tr>
{{/each}}

    {{!-- {{#each employees}}
    <tr>
        <td>{{this.id}}</td>
        <td>{{this.name}}</td>
        <td>{{this.email}}</td>
        <td>{{this.phone}}</td>
        <td>{{this.department}}</td>
        <td>
              <a href="/edit/{{this.id}}">
                <button type="button">Update</button>
            </a>    
            &nbsp; 
            <form action="/delete/{{this.id}}" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
            </form>
        </td>
    </tr>
    {{/each}} --}}
</table>


{{!-- // for pagination--}}
<footer>
    <div class="pagination">    
        &nbsp;
        {{#if (gt currentPage 1)}}
         <button><a href="/employees?page={{subtract currentPage 1}}" id="prevbtn" class="btn">Previous</a></button>
        {{/if}}

        &nbsp;
        &nbsp;
        &nbsp;

        {{#if (lt currentPage totalPages)}}
          <button><a href="/employees?page={{add currentPage 1}}" id="nextbtn" class="btn">Next</a></button>
        {{/if}}
    </div>
</footer>

</body>
</html>
